---
title: teleport-cluster Helm chart values reference
description: A list of values that can be set using the teleport-cluster Helm chart and their purpose
---

# `teleport-cluster` Helm chart values reference

This reference details available values for the `teleport-cluster` chart.

## `clusterName`

| Default value |  Can be used in `ownconfig` mode? | `teleport.yaml` equivalent |
| - | - | - |
| Not set | ❌ | `auth_service.cluster_name`, `proxy_service.public_addr` |

`clusterName` controls the name used to refer to the Teleport cluster, along with the externally-facing public address to use to access it.

<Admonition type="warning" title="Potential mandatory value">
  This value must be set when `chartMode` is set to `aws`, `gcp` or `standalone`.
</Admonition>

<Admonition type="note">
  If using a fully qualified domain name as your `clusterName`, you will also need to configure the DNS provider for this domain to point
  to the external load balancer address of your Teleport cluster.

  Whether an IP or hostname is provided as an external address for the load balancer varies according to provider.

  For example, GKE uses an IP address:
  ```shell
  $ kubectl --namespace teleport get service/teleport -o jsonpath='{.status.loadBalancer.ingress[*].ip}'
  35.203.56.38
  ```

  While EKS uses a hostname:
  ```shell
  $ kubectl --namespace teleport get service/teleport -o jsonpath='{.status.loadBalancer.ingress[*].hostname}'
  a5f22a02798f541e58c6641c1b158ea3-1989279894.us-east-1.elb.amazonaws.com
  ```

  You will need to manually add DNS records pointing `teleport.example.com` and `*.teleport.example.com` to either the IP or hostname
  of the Kubernetes load balancer.

  If you are not using ACME certificates, you may also need to accept insecure warnings in your browser to view the page successfully.
</Admonition>

## `enterprise`

| Default value | Can be used in `ownconfig` mode? |
| - | - |
| `false`| ✅ |

`enterprise` controls whether to use Teleport Community Edition or Teleport Enterprise.

Setting `enterprise` to `true` will use the Teleport Enterprise image.

You will also need to download your Enterprise license from the Teleport dashboard and add it as a Kubernetes secret to use this:

```
kubectl create secret generic license --from-file=/path/to/downloaded/license.pem
```

<Admonition type="tip">
  If you installed the Teleport chart into a specific namespace, the `license` secret you create must also be added to the same namespace.
</Admonition>

<Admonition type="note">
  The file added to the secret must be called `license.pem`. If you have renamed it, you can specify the filename to use in the secret creation command:

  ```shell
  kubectl create secret generic license --from-file=license.pem=/path/to/downloaded/this-is-my-teleport-license.pem
  ```
</Admonition>

## `teleportVersionOverride`

| Default value | Can be used in `ownconfig` mode? |
| - | - |
| Not set | ✅ |

Normally the version of Teleport being used will match the version of the chart being installed. If you install chart version
7.0.0, you'll be using Teleport 7.0.0.

You can optionally override this to use a different published Teleport Docker image tag like `6.0.2` or `7`.

See these links for information on Docker image versions:

- [Community Docker image information](../../quickstart-docker.mdx#pick-your-image)
- [Enterprise Docker image information](../../enterprise/quickstart-enterprise.mdx#run-teleport-enterprise-using-docker)

<Tabs>
  <TabItem label="values.yaml">
  ```yaml
  enterprise: true
  teleportVersionOverride: "7"
  ```
  </TabItem>
  <TabItem label="--set">
  ```shell
  --set enterprise=true \
  --set teleportVersionOverride="7"
  ```
  </TabItem>
</Tabs>

## `acme`

| Default value | Can be used in `ownconfig` mode? | `teleport.yaml` equivalent |
| - | - | - |
| `false` | ❌ | `proxy_service.acme.enabled` |

ACME is a protocol for getting Web X.509 certificates.

Setting acme to `true` enables the ACME protocol and will attempt to get a free TLS certificate from Let's Encrypt.
Setting acme to `false` (the default) will cause Teleport to generate and use self-signed certificates for its web UI.

<Admonition type="note">
  ACME can only be used for single-pod clusters. It is not suitable for use in HA configurations.
</Admonition>

<Admonition type="warning">
  Using a self-signed TLS certificate and disabling TLS verification is OK for testing, but is not viable when running a production Teleport
  cluster as it will drastically reduce security. You must configure valid TLS certificates on your Teleport cluster for production workloads.

  One option might be to use Teleport's built-in [ACME support](./teleport-cluster-reference.mdx#acme), or [cert-manager](https://cert-manager.io/docs/).
</Admonition>

## `acmeEmail`

| Default value | Can be used in `ownconfig` mode? | `teleport.yaml` equivalent |
| - | - | - |
| Not set  | ❌ | `proxy_service.acme.email` |

`acmeEmail` is the email address to provide during certificate registration (this is a Let's Encrypt requirement).

## `acmeURI`

| Default value | Can be used in `ownconfig` mode? | `teleport.yaml` equivalent |
| - | - | - |
| Let's Encrypt production server | ❌ | `proxy_service.acme.uri` |

`acmeURI` is the ACME server to use for getting certificates.

As an example, this can be overridden to use the [Let's Encrypt staging server](https://letsencrypt.org/docs/staging-environment/) for testing.

You can also use any other ACME-compatible server.

<Tabs>
  <TabItem label="values.yaml">
  ```yaml
  acme: true
  acmeEmail: user@email.com
  acmeURI: https://acme-staging-v02.api.letsencrypt.org/directory
  ```
  </TabItem>
  <TabItem label="--set">
  ```shell
  --set acme=true \
  --set acmeEmail=user@email.com \
  --set acmeURI=https://acme-staging-v02.api.letsencrypt.org/directory
  ```
  </TabItem>
</Tabs>

## `podSecurityPolicy`

### `podSecurityPolicy.enabled`

| Default value | Can be used in `ownconfig` mode? |
| - | - |
| `true` | ✅ |

By default, Teleport charts also install a [`podSecurityPolicy`](https://github.com/gravitational/teleport/blob/master/examples/chart/teleport-cluster/templates/psp.yaml).

To disable this, you can set `enabled` to `false`.

[Kubernetes concepts: `podSecurityPolicy`](https://kubernetes.io/docs/concepts/policy/pod-security-policy/)

<Tabs>
  <TabItem label="values.yaml">
  ```yaml
  podSecurityPolicy:
    enabled: false
  ```
  </TabItem>
  <TabItem label="--set">
  ```shell
  --set podSecurityPolicy.enabled=false
  ```
  </TabItem>
</Tabs>

## `labels`

| Default value | Can be used in `ownconfig` mode? | `teleport.yaml` equivalent |
| - | - | - |
| Not set | ❌ | `kubernetes_service.labels` |

`labels` can be used to add a map of key-value pairs relating to the Teleport cluster being deployed. These labels can then be used with
Teleport's RBAC policies to define access rules for the cluster.

<Admonition type="note">
  These are Teleport-specific RBAC labels, not Kubernetes labels.
</Admonition>

<Tabs>
  <TabItem label="values.yaml">
  ```yaml
  labels:
    environment: production
    region: us-east
  ```
  </TabItem>
  <TabItem label="--set">
  ```shell
  --set labels.environment=production \
  --set labels.region=us-east
  ```
  </TabItem>
</Tabs>

## `chartMode`

| Default value |
| - |
| `standalone` |

`chartMode` is used to configure the chart's operation mode. You can find more information about each mode on its specific guide page:

| `chartMode` | Guide |
| - | - |
| `standalone` | [Running a quick one-pod Teleport cluster in Kubernetes using Helm](./standalone.mdx) |
| `aws` | [Running a highly-available Teleport cluster using AWS, EKS and Helm](./aws.mdx) |
| `gcp` | [Running a highly-available Teleport cluster using GCP, GKE and Helm](./gcp.mdx) |
| `ownconfig` | [Running a Teleport cluster with a custom Teleport config using Helm](./ownconfig.mdx) |

## `standalone`

### `standalone.existingClaimName`

| Default value | Can be used in `ownconfig` mode? |
| - | - |
| Not set | ✅ |

The default is left blank, which will automatically create a `PersistentVolumeClaim` to use for Teleport storage in `standalone` mode.

If you would like to use a pre-existing `PersistentVolumeClaim`, you can specify its name here.

<Tabs>
  <TabItem label="values.yaml">
  ```yaml
  standalone:
    existingClaimName: my-existing-pvc-name
  ```
  </TabItem>
  <TabItem label="--set">
  ```shell
  --set standalone.existingClaimName=my-existing-pvc-name
  ```
  </TabItem>
</Tabs>

### `standalone.volumeSize`

| Default value | Can be used in `ownconfig` mode? |
| - | - |
| `10Gi` | ✅ |

You can set `volumeSize` to request a different size of persistent volume when installing the Teleport chart in `standalone` mode.

<Admonition type="note">
  `volumeSize` will be ignored if `existingClaimName` is set.
</Admonition>

<Tabs>
  <TabItem label="values.yaml">
  ```yaml
  standalone:
    volumeSize: 50Gi
  ```
  </TabItem>
  <TabItem label="--set">
  ```shell
  --set standalone.volumeSize=50Gi
  ```
  </TabItem>
</Tabs>

## `aws`

| Can be used in `ownconfig` mode? | `teleport.yaml` equivalent |
| - | - |
| ❌ | See [Using DynamoDB](../../admin-guide.mdx#using-dynamodb) and [Using Amazon S3](../../admin-guide.mdx#using-amazon-s3) for details |

`aws` settings are described in the AWS guide: [Setting up a highly-available Teleport cluster using AWS & EKS (`aws` mode)](./aws.mdx)

## `gcp`

| Can be used in `ownconfig` mode? | `teleport.yaml` equivalent |
| - | - |
| ❌ | See [Using Firestore](../../admin-guide.mdx#using-firestore) and [Using GCS](../../admin-guide.mdx#using-gcs) for details |

`gcp` settings are described in the GCP guide: [Setting up a highly-available Teleport cluster using GCP & GKE (`gcp` mode)](./gcp.mdx)

## `highAvailability`

### `highAvailability.replicaCount`

| Default value | Can be used in `ownconfig` mode? |
| - | - |
| `1` | ✅ (when using HA storage) |

`highAvailability.replicaCount` can be used to set the number of replicas used in the deployment.

Set to a number higher than `1` for a high availability mode where multiple Teleport pods will be deployed and connections will be load balanced between them.

<Admonition type="note">
  Setting `highAvailability.replicaCount` to a value higher than `1` will disable the use of ACME certs.
</Admonition>

<Admonition type="tip" title="Sizing guidelines">
  As a rough guide, we recommend configuring one replica per distinct availability zone where your cluster has worker nodes.

  2 replicas/availability zones will be fine for smaller workloads. 3-5 replicas/availability zones will be more appropriate for bigger
  clusters with more traffic.
</Admonition>

<Admonition type="warning">
  When using `ownconfig` mode, you **must** use highly-available storage (e.g. etcd, DynamoDB or Firestore) for multiple replicas to be supported.

  [Information on supported Teleport storage backends](../../architecture/authentication.mdx#storage-back-ends)

  Manually configuring NFS-based storage or `ReadWriteMany` volume claims is **NOT** supported for an HA deployment and will result in errors.
</Admonition>

<Tabs>
  <TabItem label="values.yaml">
  ```yaml
  highAvailability:
    replicaCount: 3
  ```
  </TabItem>
  <TabItem label="--set">
  ```shell
  --set highAvailability.replicaCount=3
  ```
  </TabItem>
</Tabs>

### `highAvailability.requireAntiAffinity`

| Default value | Can be used in `ownconfig` mode? |
| - | - |
| `false | ✅ (when using HA storage) |

See [Kubernetes concepts: node affinity](https://kubernetes.io/docs/concepts/scheduling-eviction/assign-pod-node/#node-affinity)

Setting `highAvailability.requireAntiAffinity` to `true` will use `requiredDuringSchedulingIgnoredDuringExecution` to require that multiple
Teleport pods must not be scheduled on the same physical host.

<Admonition type="warning">
  This can result in Teleport pods failing to be scheduled in very small clusters or during node downtime, so should be used with caution.
</Admonition>

 Setting `highAvailability.requireAntiAffinity` to `false` (the default) uses `preferredDuringSchedulingIgnoredDuringExecution` to make node
 anti-affinity a soft requirement.

<Admonition type="note">
  This setting only has any effect when `highAvailability.replicaCount` is greater than `1`.
</Admonition>

<Tabs>
  <TabItem label="values.yaml">
  ```yaml
  highAvailability:
    requireAntiAffinity: true
  ```
  </TabItem>
  <TabItem label="--set">
  ```shell
  --set highAvailability.requireAntiAffinity=true
  ```
  </TabItem>
</Tabs>

## `image`

| Default value | Can be used in `ownconfig` mode? |
| - | - |
| `quay.io/gravitational/teleport` | ✅ |

`image` sets the container image used for Teleport Community pods in the cluster.

You can override this to use your own Teleport Community image rather than a Teleport-published image.

<Tabs>
  <TabItem label="values.yaml">
  ```yaml
  image: my.docker.registry/teleport-community-image-name
  ```
  </TabItem>
  <TabItem label="--set">
  ```shell
  --set image=my.docker.registry/teleport-community-image-name
  ```
  </TabItem>
</Tabs>

## `enterpriseImage`

| Default value | Can be used in `ownconfig` mode? |
| - | - |
| `quay.io/gravitational/teleport-ent` | ✅ |

`enterpriseImage` sets the container image used for Teleport Enterprise pods in the cluster.

You can override this to use your own Teleport Enterprise image rather than a Teleport-published image.

<Tabs>
  <TabItem label="values.yaml">
  ```yaml
  enterpriseImage: my.docker.registry/teleport-enterprise-image-name
  ```
  </TabItem>
  <TabItem label="--set">
  ```shell
  --set enterpriseImage=my.docker.registry/teleport-enterprise-image
  ```
  </TabItem>
</Tabs>

## `logLevel`

| Default value | Can be used in `ownconfig` mode? | `teleport.yaml` equivalent |
| - | - | - |
| `INFO` | ❌ | `teleport.log.severity` |

`logLevel` sets the log level used for the Teleport process.

Available log levels (in order of most to least verbose) are: `DEBUG`, `INFO`, `WARNING`, `ERROR`.

The default is `INFO`, which is recommended in production.

`DEBUG` is useful during first-time setup or to see more detailed logs for debugging.

<Tabs>
  <TabItem label="values.yaml">
  ```yaml
  logLevel: DEBUG
  ```
  </TabItem>
  <TabItem label="--set">
  ```shell
  --set logLevel=DEBUG
  ```
  </TabItem>
</Tabs>

